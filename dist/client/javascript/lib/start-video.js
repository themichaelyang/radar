'use strict';

// todo: move everything into nice modules and objects!
// these random functions everywhere is not cutting it for me
// polluting that global scope >:-(

// most functions should be pretty generic and atomic
function startVideo(options) {
  return new Promise(function (resolve, reject) {
    navigator.mediaDevices.getUserMedia(options).then(function (mediaStream) {
      var video = document.createElement('video');
      video.src = window.URL.createObjectURL(mediaStream);
      awaitVideoLoad(video).then(function () {
        return resolve(video);
      });
    });
  });
}

function awaitVideoLoad(video) {
  return new Promise(function (resolve, reject) {
    video.onloadedmetadata = function (event) {
      // resolve(video);
      resolve();
    };
  });
}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImphdmFzY3JpcHQvbGliL3N0YXJ0LXZpZGVvLmpzIl0sIm5hbWVzIjpbInN0YXJ0VmlkZW8iLCJvcHRpb25zIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJuYXZpZ2F0b3IiLCJtZWRpYURldmljZXMiLCJnZXRVc2VyTWVkaWEiLCJ0aGVuIiwibWVkaWFTdHJlYW0iLCJ2aWRlbyIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsInNyYyIsIndpbmRvdyIsIlVSTCIsImNyZWF0ZU9iamVjdFVSTCIsImF3YWl0VmlkZW9Mb2FkIiwib25sb2FkZWRtZXRhZGF0YSIsImV2ZW50Il0sIm1hcHBpbmdzIjoiOztBQUFBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFNBQVNBLFVBQVQsQ0FBb0JDLE9BQXBCLEVBQTZCO0FBQzNCLFNBQU8sSUFBSUMsT0FBSixDQUFZLFVBQUNDLE9BQUQsRUFBVUMsTUFBVixFQUFxQjtBQUN0Q0MsY0FBVUMsWUFBVixDQUF1QkMsWUFBdkIsQ0FBb0NOLE9BQXBDLEVBQ0NPLElBREQsQ0FDTSxVQUFDQyxXQUFELEVBQWlCO0FBQ3JCLFVBQUlDLFFBQVFDLFNBQVNDLGFBQVQsQ0FBdUIsT0FBdkIsQ0FBWjtBQUNBRixZQUFNRyxHQUFOLEdBQWFDLE9BQU9DLEdBQVAsQ0FBV0MsZUFBWCxDQUEyQlAsV0FBM0IsQ0FBYjtBQUNBUSxxQkFBZVAsS0FBZixFQUFzQkYsSUFBdEIsQ0FBMkI7QUFBQSxlQUFNTCxRQUFRTyxLQUFSLENBQU47QUFBQSxPQUEzQjtBQUNELEtBTEQ7QUFNRCxHQVBNLENBQVA7QUFRRDs7QUFFRCxTQUFTTyxjQUFULENBQXdCUCxLQUF4QixFQUErQjtBQUM3QixTQUFPLElBQUlSLE9BQUosQ0FBWSxVQUFDQyxPQUFELEVBQVVDLE1BQVYsRUFBcUI7QUFDdENNLFVBQU1RLGdCQUFOLEdBQXlCLFVBQUNDLEtBQUQsRUFBVztBQUNsQztBQUNBaEI7QUFDRCxLQUhEO0FBSUQsR0FMTSxDQUFQO0FBTUQiLCJmaWxlIjoiamF2YXNjcmlwdC9saWIvc3RhcnQtdmlkZW8uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyB0b2RvOiBtb3ZlIGV2ZXJ5dGhpbmcgaW50byBuaWNlIG1vZHVsZXMgYW5kIG9iamVjdHMhXG4vLyB0aGVzZSByYW5kb20gZnVuY3Rpb25zIGV2ZXJ5d2hlcmUgaXMgbm90IGN1dHRpbmcgaXQgZm9yIG1lXG4vLyBwb2xsdXRpbmcgdGhhdCBnbG9iYWwgc2NvcGUgPjotKFxuXG4vLyBtb3N0IGZ1bmN0aW9ucyBzaG91bGQgYmUgcHJldHR5IGdlbmVyaWMgYW5kIGF0b21pY1xuZnVuY3Rpb24gc3RhcnRWaWRlbyhvcHRpb25zKSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEob3B0aW9ucylcbiAgICAudGhlbigobWVkaWFTdHJlYW0pID0+IHtcbiAgICAgIGxldCB2aWRlbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3ZpZGVvJyk7XG4gICAgICB2aWRlby5zcmMgPSAgd2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwobWVkaWFTdHJlYW0pO1xuICAgICAgYXdhaXRWaWRlb0xvYWQodmlkZW8pLnRoZW4oKCkgPT4gcmVzb2x2ZSh2aWRlbykpO1xuICAgIH0pO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gYXdhaXRWaWRlb0xvYWQodmlkZW8pIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICB2aWRlby5vbmxvYWRlZG1ldGFkYXRhID0gKGV2ZW50KSA9PiB7XG4gICAgICAvLyByZXNvbHZlKHZpZGVvKTtcbiAgICAgIHJlc29sdmUoKTtcbiAgICB9O1xuICB9KTtcbn1cbiJdfQ==
